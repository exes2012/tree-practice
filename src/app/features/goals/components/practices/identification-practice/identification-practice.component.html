<app-practice-layout
  [practiceTitle]="'Выявление установки'"
  [steps]="steps"
  [currentStepIndex]="currentStepIndex"
  [currentStepData]="steps[currentStepIndex]"
  (practiceFinished)="onPracticeFinished($event)"
  (nextStepClicked)="onNextStepClicked()"
  (previousStepClicked)="onPreviousStepClicked()"
  (toggleRepetitionClicked)="onToggleRepetitionClicked($event)"
>
  <ng-template #stepContent let-step="step" let-currentStepIndex="currentStepIndex">
    <div class="step-content">
      <h3 *ngIf="step.title" class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2">{{ step.title }}</h3>
      <p class="instruction" [innerHTML]="getInstruction(step)"></p>

      <div *ngIf="step.inputField === 'practiceFormulation'">
        <textarea [(ngModel)]="practiceFormulation" placeholder="Введите вашу цель" class="practice-formulation-textarea"></textarea>
      </div>

      <div *ngIf="step.inputField === 'imageAnalysis'">
        <textarea [(ngModel)]="imageAnalysis" placeholder="Опишите, что вы видите" class="image-analysis-textarea"></textarea>
      </div>

      <div *ngIf="step.inputField === 'reasonForConcern'">
        <textarea [(ngModel)]="reasonForConcern" placeholder="Что смущает в образе?"></textarea>
      </div>

      <div *ngIf="step.inputField === 'questionsToHelp'">
        <textarea [(ngModel)]="questionsToHelp" placeholder="Ваши мысли"></textarea>
      </div>

      <div *ngIf="step.inputField === 'installationFormulation'">
        <textarea [(ngModel)]="installationFormulation" placeholder="Дополните формулу" class="installation-formulation-textarea"></textarea>
      </div>

      <!-- Rating is now handled by PracticeLayoutComponent -->

    </div>
  </ng-template>
</app-practice-layout>
