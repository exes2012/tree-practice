import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { PracticeLayoutComponent } from '@app/shared/components/practice-layout/practice-layout.component';
import { PracticeService } from '@app/core/services/practice.service';

@Component({
  selector: 'app-specific-request-practice-v2',
  templateUrl: './specific-request-practice-v2.component.html',
  styleUrls: ['./specific-request-practice-v2.component.scss'],
  standalone: true,
  imports: [CommonModule, FormsModule, PracticeLayoutComponent]
})
export class SpecificRequestPracticeV2Component {
  practiceTitle = 'Работа с конкретным запросом v2';
  practiceSubtitle = 'Прояснение и разрешение';
  description = 'Это упражнение направлено на проработку конкретного запроса или проблемы через призму каббалистических знаний. Цель - получить ясное видение ситуации и найти пути ее разрешения.';
  time = '25 мин';
  level = 'Продвинутый';
  showTimer = false;

  userProblem = '';

  practiceSteps = [
    { title: 'Шаг 1: Ощущение', instruction: 'Почувствуй пространство, себя, свое тело.' },
    { title: 'Шаг 2: Определение проблемы', instruction: 'С чем бы ты хотел поработать?' },
    { title: 'Шаг 3: Локализация проблемы', instruction: 'Почувствуй ярко проблему. Найди, где она ощущается. Ее размер, форму. Найди, она ощущается внутри или снаружи тебя. Покажи рукой в это место.' },
    { title: 'Шаг 4: Самоотмена', instruction: 'Положи руку туда, где находится это чувство. Одновременно с этим поставь руку на грудную точку и проговаривай до состояния уменьшения важности и самоотмены. <br><br><strong>"Мне не важно, решится эта проблема, или нет. Мне нужна только связь с Творцом. И я здесь только для того, чтобы с ним соединиться через эту проблему."</strong> <br><br>', repeatablePhrase: 'Мне не важно, решится эта проблема, или нет. Мне нужна только связь с Творцом. И я здесь только для того, чтобы с ним соединиться через эту проблему.' },
    { title: 'Шаг 5: Найдите других', instruction: 'Попытайся почувствовать все души в общей системе, которые страдают от такой же проблемы. Скажи: <br><br><strong>"Все души, у которых есть такая же проблема, отпечатаны во мне, связаны со мной в одну общую систему. Я присоединяю к себе их желания и формирую одно общее желание для просьбы".</strong>', repeatablePhrase: 'Все души, у которых есть такая же проблема, отпечатаны во мне. Мы связаны в одну общую систему. Я присоединяю к себе их желания и формирую одно общее желание для просьбы.' },
    { title: 'Шаг 6: Проводник света', instruction: 'Соединив все желания в единое целое, работай как проводник. Проси об исправлении намерения в общем желании и притягивай в исправленные сосуды благо и наслаждение.<br><br><strong>"Творец, исправь намерение внутри нашего общего желания из получения в отдачу, приблизь нас к себе и наполни наши нехватки благом и наслаждением."</strong>', repeatablePhrase: 'Творец, исправь намерение внутри нашего общего желания из получения в отдачу, приблизь нас к себе и наполни наши нехватки благом и наслаждением.' },
    { title: 'Шаг 7: Видение участников', instruction: 'Попроси Творца показать, какие еще участники вовлечены в эту проблему.' },
    { title: 'Шаг 8: Свет вместо тьмы', instruction: 'Почувствуй, что любое зло, любое страдание в людях это недостаток света. Тьмы не создано. Создан недостаток света. Попробуй включиться в других участников. Почувствовать, какие нехватки есть у них. Присоедини их нехватки к себе. Скажи:<br><br><strong>"Творец, исправь намерения внутри наших желаний из получения в отдачу, приблизь нас к себе и наполни наши нехватки благом и наслаждением."</strong>', repeatablePhrase: 'Творец, исправь намерения внутри наших желаний из получения в отдачу, приблизь их к себе и наполни наши нехватки благом и наслаждением.' },
    { title: 'Шаг 9: Соединение', instruction: 'Отметь, какими ты видишь участников, вовлеченных в проблему. Каким или какой ты видишь себя. Каким ты видишь Творца в отношении этой проблемы. Проси Творца исправить намерение внутри твоего желания на альтруистическое. <br><br><strong>"Творец, исправь мое намерение, чтобы оно было ради связи, ради отдачи, ради Тебя."</strong>', repeatablePhrase: 'Творец, исправь мое намерение, чтобы оно было ради связи, ради отдачи, ради Тебя.' },
    { title: 'Шаг 10: Соединение', instruction: 'Почувствуй ещё раз всех участников, вовлечённых в эту проблему, все их сосуды. Собери все их сосуды воедино, как собрание всех душ. Подними их в точку, где ощущается Творец, и удерживай его там. Скажи: <br><br><strong>"Всё, что существует внутри этой системы, включая эту проблему — и есть Творец.".</strong> И побудь в этом состоянии.', repeatablePhrase: 'Всё, что существует внутри этой системы, включая эту проблему — и есть Творец.' },
    { title: 'Шаг 11: Благодарность', instruction: 'Вырази благодарность Творцу в меру получения облегчения и изменения. <br><br><strong>"Благодарю за это общение".</strong>' },
    { title: 'Шаг 12: Оценка', instruction: 'Во сколько баллов оценишь эту проработку?' },
  ];

  constructor(private practiceService: PracticeService) { }

  onPracticeFinished(event: { rating: number }) {
    this.practiceService.saveLastPractice({ name: this.practiceTitle, route: '/practices/man/specific-request-v2' });
    this.practiceService.recordPracticeCompletion();
  }
}
