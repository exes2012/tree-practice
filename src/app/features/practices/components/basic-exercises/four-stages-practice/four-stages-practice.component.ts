import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { PracticeLayoutComponent } from '@app/shared/components/practice-layout/practice-layout.component';
import { PracticeService } from '@app/core/services/practice.service';

@Component({
  selector: 'app-four-stages-practice',
  templateUrl: './four-stages-practice.component.html',
  styleUrls: ['./four-stages-practice.component.scss'],
  standalone: true,
  imports: [CommonModule, PracticeLayoutComponent]
})
export class FourStagesPracticeComponent {
  practiceTitle = '4 стадии прямого света';
  practiceSubtitle = 'Ощутить Творца';
  description = 'Эта практика - основа каббалистической медитации. Она позволяет пройти четыре стадии взаимодействия с высшим светом, от получения до полной отдачи.';
  time = '30 мин';
  level = 'Средний';
  showTimer = false;

  practiceSteps = [
    { title: 'Подготовка', instruction: 'Прежде всего, чтобы изучать Каббалу, человек должен ощущать высший свет. Свет — это не просто слово, это наслаждение от свойства отдачи. Чтобы его ощущать, нужна особая настройка.', stage: 'Подготовка: Настройка на Свет', stageColor: 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200' },
    { title: 'Шаг 1. Создайте намерение (расчёт)', instruction: 'Спросите себя, как вы сейчас используете свою природу. Вероятно, вы думаете о себе. Нужно это изменить. Выберите кого-то, кто вам действительно дорог — любимого человека, ребёнка, друга.', stage: 'Стадия 0: Кетер (כתר)', stageColor: 'bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600' },
    { title: 'Шаг 2. Сформируйте цель', instruction: 'Ваша цель — насладить этого человека. Подумайте о том, как сделать ему что-то приятное, вызвать в нём наслаждение (кайф). Пока вы думаете об этом, вы используете своё желание (свою природу) для того, чтобы насладить кого-то вне себя. Это и есть правильное намерение.', stage: 'Стадия 0: Кетер (כתר)', stageColor: 'bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600' },
    { title: 'Шаг 3. Добавьте стремление', instruction: 'Когда намерение создано, начните добавлять стремление — внутреннюю силу, которую вы прикладываете для достижения цели.', stage: 'Стадия 0: Кетер (כתר)', stageColor: 'bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600' },
    { title: 'Шаг 1. Направьте стремление вовне', instruction: 'Удерживая в мыслях образ дорогого вам человека и желание его насладить, начните прикладывать внутреннее усилие, направленное вовне, к нему. Делайте это потихонечку, но постоянно.', stage: 'Стадия 0: Кетер (כתר)', stageColor: 'bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600' },
    { title: 'Шаг 2. Ощутите ответ света', instruction: 'Продолжая так стремиться, вы почувствуете, как к вам приходит свет — наслаждение от свойства отдачи.', stage: 'Стадия 0: Кетер (כתר)', stageColor: 'bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600' },
    { title: 'Шаг 3. Усильте стремление', instruction: 'Чтобы ощутить свет ярче, сделайте небольшой рывок стремления вовне, чуть сильнее по отношению к тому, о ком думаете. Вы сразу почувствуете, как свет отвечает и приходит более ярко. Свет конкретно реагирует на ваше стремление.', stage: 'Стадия 0: Кетер (כתר)', stageColor: 'bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600' },
    { title: 'Итог стадии Кэтер', instruction: 'Это стадия Кэтер: вы бесконечно стремитесь вне себя, в отдачу, и свет бесконечности вам отвечает.', stage: 'Стадия 0: Кетер (כתר)', stageColor: 'bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600' },
    { title: 'Шаг 1. Измените вектор стремления', instruction: 'Теперь, когда вы настроились на свет и ощущаете его, нужно поменять вектор работы. Силу, которую вы прикладывали для стремления вовне (в отдачу), начните использовать для притяжения к себе. Цепляясь за свет, который вы вызвали, начните приглашать его внутрь.', stage: 'Стадия 1: Хохма (חכמה)', stageColor: 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200' },
    { title: 'Шаг 2. Получайте без требований', instruction: 'Притягивайте ровно столько света, сколько приходит. Не требуйте большего. «Вот что приходит, то и хорошо». Важно, чтобы стремление было бесконечным, но аккуратным. Вы ощутите, как свет теперь наполняет вас изнутри.', stage: 'Стадия 1: Хохма (חכמה)', stageColor: 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200' },
    { title: 'Шаг 3. Раскройте отношение творца', instruction: 'Когда свет наполняет вас, смотрите не просто на кайф, а на отношение, с которым этот свет приходит. Сделайте небольшой рывок в получении, притяните чуть сильнее. Вы увидите, что свет сразу же реагирует, приходит больше. Он живой. Вы раскрываете, что за этим светом есть добрый источник, который хочет вас насладить и ничего не требует взамен, кроме вашего стремления получать.', stage: 'Стадия 1: Хохма (חכמה)', stageColor: 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200' },
    { title: 'Итог стадии Хохма', instruction: 'Это стадия Хохма: вы притягиваете свет и ощущаете его внутри себя, раскрывая за наслаждением живого, любящего Творца.', stage: 'Стадия 1: Хохма (חכמה)', stageColor: 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200' },
    { title: 'Шаг 1. Ощутите благодарность', instruction: 'Когда в стадии Хохма вы раскрываете живого Творца, который на вас реагирует, в вас рождается огромное чувство благодарности. Эта благодарность настолько сильна, что вам хочется сказать «спасибо» этому источнику. Желание меняется: вы больше не хотите просто получать, вы хотите насладить Его.', stage: 'Стадия 2: Бина (בינה)', stageColor: 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' },
    { title: 'Шаг 2. Снова стремитесь в отдачу', instruction: 'Теперь вы используете стремление опять вне себя, но уже не просто к образу человека, а к ощущаемому вами Источнику света. Вы хотите, чтобы свет, который вас наполняет, вернулся к Нему и ощущался в Нём.', stage: 'Стадия 2: Бина (בינה)', stageColor: 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' },
    { title: 'Шаг 3. Наслаждайтесь отдачей', instruction: 'Это стремление вызывает в вас такой кайф, такую благодарность «до соплей, до слёз», что вы хотите навсегда остаться в этом состоянии — в отдаче. Вы начинаете как бы выталкивать из себя весь свет, возвращая его Творцу, и наслаждаетесь от этого не меньше, чем от получения.', stage: 'Стадия 2: Бина (בינה)', stageColor: 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' },
    { title: 'Шаг 4. Осознайте парадокс', instruction: 'Чем сильнее вы стремитесь в отдачу и выталкиваете свет, тем сильнее он давит на вас сверху вниз, на получение. Творец показывает вам: «Хочешь мне отдавать? Так свет, который Я заготовил для тебя, должен находиться внутри тебя, а ты его выкидываешь».', stage: 'Стадия 2: Бина (בינה)', stageColor: 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' },
    { title: 'Итог стадии Бина', instruction: 'Это стадия Бина: вы стремитесь в чистой отдаче из благодарности к Творцу и через Его ответ понимаете, что истинная отдача — это получать то, что Он хочет вам дать.', stage: 'Стадия 2: Бина (בינה)', stageColor: 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' },
    { title: 'Шаг 1. Примите свет «ради него»', instruction: 'Это стадия, где соединяются Хохма и Бина. Вы остаётесь в своей благодарности (Бина), но принимаете желание Творца (получение). Находясь в Бине и ощущая, как свет давит на получение, вы принимаете решение: «Ладно, раз Ты так хочешь, ради Тебя я буду получать».', stage: 'Стадия 3: ЗА (זעיר אנפין)', stageColor: 'bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200' },
    { title: 'Шаг 2. Совместите два действия', instruction: 'Начните выполнять два действия одновременно. Чуть-чуть притягивайте свет к себе, как в Хохме, но делайте это с намерением, чтобы отдавать, как в Бине. Сначала можно делать по очереди: притянул — перевернул в отдачу. Затем старайтесь делать это вместе.', stage: 'Стадия 3: ЗА (זעיר אנפין)', stageColor: 'bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200' },
    { title: 'Шаг 3. Обретите контроль', instruction: 'Вы ощутите, как наслаждаетесь сразу от двух природ: и от получения, и от отдачи. И главное — от того, что вы теперь контролируете эти состояния, а не бегаете за ними. Вы бесконечно получаете и бесконечно отдаёте одновременно.', stage: 'Стадия 3: ЗА (זעיר אנפין)', stageColor: 'bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200' },
    { title: 'Итог стадии ЗА', instruction: 'Это стадия ЗА, или получение ради отдачи. Вы осознаёте, что значит по-настоящему отдавать Творцу.', stage: 'Стадия 3: ЗА (זעיר אנפין)', stageColor: 'bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200' },
    { title: 'Шаг 1. Сокращение (цимцум)', instruction: 'После освоения этих стадий рождается настоящая Малхут — осознанное желание получить весь свет, который Творец заготовил, но сделать это исправленным образом. Вы понимаете, что просто получать всем своим эгоизмом нельзя — свет пропадёт, как оргазм, который исчезает в момент получения. Поэтому вы делаете сокращение: вы стремитесь получить свет, притягиваете его со всей силой, но сдерживаете себя от получения. Вы удерживаете весь кайф как бы перед собой, не впуская внутрь.', stage: 'Стадия 4: Малхут (מלכות)', stageColor: 'bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200' },
    { title: 'Шаг 2. Экран (масах) и удар (зивуг де-акаа)', instruction: 'Удерживать свет в сокращении тяжело. Чтобы обрести лёгкий контроль, нужен экран. Когда вы притягиваете свет и чувствуете, как он давит на ваше сокращение, сделайте этим сокращением резкий удар в свет — противоположным стремлением, жёстко вовне. Но во время удара не давайте свету убежать, сразу возвращайте его на то же место перед собой. После такого удара вы почувствуете, что обрели полный и лёгкий контроль над светом.', stage: 'Стадия 4: Малхут (מלכות)', stageColor: 'bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200' },
    { title: 'Итог практики', instruction: 'Это основа, ваши пять органов чувств, с которыми начинается настоящее знакомство с наукой Каббала. Каждое слово — Кетер, Хохма, Бина, Зеир Анпин, Малхут — это не информация, а конкретное внутреннее действие, которое вы должны выполнять.', stage: 'Итог', stageColor: 'bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200' },
    { title: 'Оценка', instruction: 'Насколько хорошо вы ощущали свет?', stage: 'Оценка', stageColor: 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200' }
  ];

  constructor(private practiceService: PracticeService) {}

  onPracticeFinished(event: { rating: number }) {
    this.practiceService.saveLastPractice({ name: this.practiceTitle, route: '/practices/basic/four-stages' });
    this.practiceService.recordPracticeCompletion();
  }
}